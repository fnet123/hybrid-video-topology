\chapter{Introduction}\label{chp:introduction}

\epigraph{If I have seen further, it is by standing on the shoulders of giants}{Isaac Newton}

The web is becoming the primary platform for all communication. People are gradually moving away from solutions provided by their telecommunications company, such as telephony and text messaging, and over to Internet-based services. Moving audio conversations to the Internet has been relatively easy, but as we're now trying to commoditize video conversations, we have a bigger challenge ahead of us. Video conferencing has traditionally been the domain of custom rooms and dedicated hardware, we're now trying to replicate that experience in regular laptops and phones. This has lead to performance requirements greater than most user equipment and their connections can handle. This thesis aims to lessen those performance requirements, and make video conferencing feasible in cases where it is not today.


\section{Problem}

appear.in, Firefox Hello and OpenTok are just a few examples of new video conferencing services that have emerged in recent times built on WebRTC, a standard for peer-to-peer communication in the browser. Without any further magic behind the scenes, such solutions will demand a linear increase in bandwidth both upstream and downstream as the number of peers in a conversation grows. This follows from the fact that in a peer-to-peer video conversation, each peer has to encode its own video to each of the other peers, send it to each of those peers, and receive that peer's video. This is expensive in terms of both CPU and bandwidth, and quickly outgrows what many devices are actually capable of.

However, many other video conferencing services does not have this problem, as they ship all video through their own servers. Skype, Google Hangouts, custom rooms -- none of those has this scalability problem\footnote{They do however have another scalability problem: The number of servers they need to accommodate their users grows linearly with the total number of users on the platform.}. On the downside, they don't have the small latency that can be achieved when you route video directly to the receiver, like you do in a peer-to-peer topology. They are also much costlier to operate; peer-to-peer systems only require a provider to help peers find each other, and will never see any of the actual video being transmitted\footnote{Generally. In some cases video will be transmitted through the provider for firewall-traversal.}. Which begs the question at the heart of this thesis -- can we design a solution that transcends these boundaries and provides high quality service for all combinations of user equipment and connections, without being expensive to run?

The main objective of this thesis is to maximize the system's \gls{qoe}. We'll here adhere to the Qualinet white paper definition of QoE, \say{Degree of delight of the user of a service \ldots} \cite{qualinet}. The white paper identifies three primary \glspl{if} that interrelate to together form the QoE; Human IFs, System IFs and Context IFs. This thesis will focus on two sub-categories of the System IF, namely network-related and device-related System IFs, since these are the ones most easily accessible to WebRTC services. However, the approach will be designed with adaptability in mind, such that more IFs can be included in the QoE model if they're available. This enables the system to grow as we gain a better understanding of QoE for video conversations.

However, QoE is a hard thing to maximize, as it's very dependent on the users, which we don't know anything about. We will thus focus on a related term, \gls{qose}, which is a quantitative measure of how we believe a normal user will perceive the quality of a service\footnote{Definitions vary, thus we explicitly state how QoSE has been interpreted in this thesis}. Research on psychophysics have yielded a stimulus-perception model known as the \gls{wfl} \cite{wfl}, which says that our perception is a logarithmic function of the magnitude of physical stimuli. \cite{wfl-qoe} has shown this effect to also apply in several domains relevant to this thesis, namely QoE assessment for \gls{voip} and data services. This fuels our model of QoSE as logarithmic function of the performance delivered by the service. We aggregate the QoSE for all users in a conversation and try to maximize this value in our approach, the underlying assumption here being that the QoSE will act as a proxy for the QoE, thus by maximizing the QoSE we also maximize the QoE. A formal breakdown of the approach is given in \autoref{chp:suggested-solution}.


\section{Structure and Methodology}

Before trying to solve the problem we'll first evaluate the current video conversation landscape in \autoref{chp:background}, to get a sense of the status quo. To limit the scope of what we're trying to accomplish, I'll define some test cases in \autoref{chp:test-cases} that we'll use throughout the thesis. In \autoref{chp:experiments} we'll evaluate one of the providers on the market today by putting it to the test, running all the test cases from \autoref{chp:test-cases} to see how the service performs. Knowing this benchmark helps us evaluate the potential for the approach outlined in this thesis, which we'll take a look at in \autoref{chp:suggested-solution}. We'll discuss how the approach can be implemented and its strengths and weaknesses in \autoref{chp:discussion}, before summarizing what we've learned in \autoref{chp:conclusions}.


\section{Contribution}

This thesis proposes an approach to modelling video conferences with known inter-node latencies and bandwidths as a flow network, and shows how an efficient routing for video can be derived from the model using linear programming. The method also demonstrates how performance can get a significant boost by adding extra nodes to the flow network acting as repeaters and transcoders, bridging the performance gap between traditional \gls{mcu}-backed solutions and peer-to-peer solutions.\todo{Rewrite this}

The two most popular web browsers as of the time of writing, Google Chrome and Mozilla Firefox, is benchmarked in a set of test cases, which reveals severe flaws in how Firefox handles constrained nodes. Both browsers are shown to have lots of potential for increased performance. These tests were run with tools developed for this purpose, which are included in the appendices.


\section{Notation and Terminology}

A video conference will often be called a conversation in this thesis. The term ``video conferencing'' carries a lot of luggage from its early history, when the technology was cumbersome, expensive, and only applicable in business scenarios. The movement WebRTC represents is about the opposite, commoditizing the technology to make it cheap and accessible to everyone, allowing it to enter the private domain. Friends don't ``confer'' between themselves; they converse. Names say a lot about a technology's intended application, thus if we want the technology to enter the private domain we need a name for it that does not convey business usage. Hence the term used in this thesis: video conversations. The even less formal ``video chat'' could also have fit the bill, but that feels like it leaves the business side entirely in the dark; conversation feels like a good middle ground that is applicable to both sides.


\section{Disclaimer}

This thesis does not try to measure or solve for audio transmission, as that's a much simpler problem that can practically always be completed by sending the same stream to all nodes in the conversation. There's always only one stream to encode, it doesn't noticeably affect available bandwidth, and it's already widely deployed. However, results we achieve for video can also be applied to audio streams if the environment is very heavily constrained or further optimization is required, but is out of scope for this thesis.
